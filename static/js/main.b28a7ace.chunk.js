(this.webpackJsonpBlogPostWithReact=this.webpackJsonpBlogPostWithReact||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(21)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),l=a(1);a(13);var s=function(e){var t=e.bloggers;return r.a.createElement("div",{className:"overflow-auto myHeight"},t.map((function(e){return r.a.createElement("div",{className:"card mb-3",key:e.id},r.a.createElement("img",{src:e.avatar,className:"card-img-top",alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.lastname)))})))};a(14);var i=function(e){var t=e.isInWorkspace,a=e.posts,n=e.removePost,c=e.formToUp;return r.a.createElement("div",{className:"overflow-auto myHeight emptyBlock",style:{minHeight:"50px"}},0===a.length?r.a.createElement("div",{className:"text-light bg-dark",style:{padding:"10px",borderRadius:"5px"}},"Empty"):a.map((function(e,a){return r.a.createElement("div",{className:"card mb-3",key:e.id},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.title),r.a.createElement("p",{className:"card-text"},e.description),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return n(e.id)},className:"btn btn-outline-danger mr-3"},"Remove"),r.a.createElement("button",{onClick:function(){return c(e)},className:"btn btn-outline-success"},"Update"))))})))},m=(a(15),function(){return r.a.createElement("div",{style:{width:"100vw",height:"100vh"}},r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loader"}))))))}),u=a(3),d=a(4),p="https://it-blog-posts.herokuapp.com/api/",f="people/",b="people/login",v=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"get",value:function(){return fetch("".concat(p).concat(f))}},{key:"postLogin",value:function(e){return fetch("".concat(p).concat(b),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}},{key:"getById",value:function(e){return fetch("".concat(p).concat(f).concat(e)).then((function(e){return e.json()}))}},{key:"registerUser",value:function(e){return fetch("".concat(p).concat(f),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}}]),e}(),g=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"set",value:function(e,t){try{var a=JSON.stringify(t);localStorage.setItem(e,a)}catch(n){throw new Error(n.message)}}},{key:"get",value:function(e){try{var t=localStorage.getItem(e);return JSON.parse(t)||null}catch(a){throw new Error(a.message)}}},{key:"remove",value:function(e){try{localStorage.removeItem(e)}catch(t){throw new Error(t.message)}}}]),e}(),h=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"get",value:function(){return fetch("".concat(p).concat("posts/"))}},{key:"set",value:function(e){return fetch("".concat(p).concat("posts/"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}},{key:"remove",value:function(e){return fetch("".concat(p).concat("posts/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})}},{key:"post",value:function(e){return fetch(p+"?access_token="+g.get("token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}},{key:"edit",value:function(e,t,a){return fetch("".concat(p).concat("posts/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}}]),e}(),E=new function e(){Object(u.a)(this,e),this.people=new v,this.posts=new h},y=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),u=Object(l.a)(o,2),d=u[0],p=u[1],f=Object(n.useState)(!0),b=Object(l.a)(f,2),v=b[0],g=b[1];return Object(n.useEffect)((function(){E.people.get().then((function(e){return e.json()})).then((function(e){c(e),g(!1)})),E.posts.get().then((function(e){return e.json()})).then((function(e){return p(e)}))}),[]),r.a.createElement("div",{className:"row"},v?r.a.createElement(m,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-3"},r.a.createElement(s,{bloggers:a})),r.a.createElement("div",{className:"col-9"},r.a.createElement(i,{posts:d}))))},O=(a(16),function(e){var t=e.tab,a=e.setNavTab;return r.a.createElement("div",{className:"w-100 bgColor-gray navbarHeight mb-3"},r.a.createElement("ul",{className:"d-flex align-items-center myUl-height",style:{listStyle:"none"}},r.a.createElement("div",{className:"betta"},"Betta version"),r.a.createElement("div",{className:"d-flex"},"Home"!==t&&r.a.createElement("li",{className:"nav-item",onClick:a.bind(null,"Home")},r.a.createElement("a",{className:"nav-link",href:"#"},"Home")),g.get("user")?"Workspace"!==t&&r.a.createElement("li",{className:"nav-item",onClick:a.bind(null,"Workspace")},r.a.createElement("a",{className:"nav-link",href:"#"},"Workspace")):r.a.createElement("li",{className:"nav-item",onClick:a.bind(null,"Login")},r.a.createElement("a",{className:"nav-link",href:"#"},"Login")),"Registration"!==t&&r.a.createElement("li",{className:"nav-item",onClick:a.bind(null,"Registration")},r.a.createElement("a",{className:"nav-link",href:"#"},"Registration")),g.get("user")&&r.a.createElement("li",{className:"nav-item",onClick:function(){g.remove("user"),g.remove("token"),a("Login")}},r.a.createElement("a",{className:"nav-link",href:"#"},"Logout")))))}),N=a(2);a(17);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var w=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(l.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(!0),i=Object(l.a)(s,2),u=i[0],d=i[1],p=function(e){var t=e.target,a=t.name,n=t.value;o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},c,Object(N.a)({},a,n)))};return Object(n.useEffect)((function(){d(!1)})),r.a.createElement(r.a.Fragment,null,u?r.a.createElement(m,null):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 d-flex justify-content-center align-itam-center"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col-12 d-flex justify-content-center align-itam-center flex-column box-shadow p-2"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email"),r.a.createElement("input",{onChange:p,name:"email",type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Write your email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),r.a.createElement("input",{onChange:p,name:"password",type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Write your password"})),r.a.createElement("button",{onClick:function(t){t.preventDefault(),c.email&&c.password?E.people.postLogin(c).then((function(e){return e.json()})).then((function(t){g.set("user",t.userId),g.set("token",t.id),e.setNavTab("Workspace")})).catch((function(){console.log("WRONG")})):console.log("EMPTY")},type:"submit",className:"btn myBtn"},"Submit"))))))};a(18);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var P=function(e){var t=e.setNavTab,a=Object(n.useState)({firstname:"",lastname:"",username:"",email:"",password:""}),c=Object(l.a)(a,2),o=c[0],s=c[1],i=function(e){var t=e.target,a=t.id,n=t.value;s(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},o,Object(N.a)({},a,n)))};return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"box-shadow login-form p-2 rounded"},r.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:i,className:"form-control",type:"text",name:"firstname",placeholder:"First Name",id:"firstname"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:i,className:"form-control",type:"text",name:"lastname",placeholder:"Last Name",id:"lastname"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:i,className:"form-control",type:"text",name:"username",placeholder:"username",id:"username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:i,className:"form-control",type:"email",name:"email",placeholder:"email",id:"email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:i,className:"form-control",type:"password",name:"password",placeholder:"password",id:"password"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{onClick:function(e){e.firstname&&e.lastname&&e.username&&e.email&&e.password&&(E.people.registerUser(e).then((function(e){if(!e.ok)throw new Error;return t("Login"),e.json()})).then((function(e){return console.log(e),e})).catch((function(e){console.log("Error: ",e)})),console.log(e))}.bind(null,o),type:"submit",id:"reg",className:"box-shadow btn myBtn"},"Registration")))))};a(19);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var C=function(e){var t=e.onShow,a=e.username,c=e.edit,o=e.upDatePost,s=Object(n.useState)({title:"",description:""}),i=Object(l.a)(s,2),m=i[0],u=i[1];Object(n.useEffect)((function(){u(c||{title:"",description:""})}),[c]);var d=function(e){var t=e.target,a=t.name,n=t.value;u(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},m,Object(N.a)({},a,n)))};return r.a.createElement("div",{className:"moda",tabIndex:"-1",role:"dialog",style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0,0,0, .5)",zIndex:"1"}},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},a),r.a.createElement("button",{onClick:t,type:"button",className:"close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("p",null,"Titile"),r.a.createElement("input",{value:m.title,name:"title",onChange:d,style:{width:"100%"}}),r.a.createElement("p",null,"Description"),r.a.createElement("textarea",{value:m.description,className:"w-100",name:"description",onChange:d})),r.a.createElement("div",{className:"modal-footer"},c?r.a.createElement("button",{className:"btn btn-dark",onClick:function(){return o(m)}},"Edit"):r.a.createElement("button",{onClick:function(){return function(e){var n={author:a,description:e.description,personId:g.get("user"),title:e.title};e.title&&e.description?E.posts.set(n).then((function(e){if(!e.ok)throw new Error;return t(),e.json()})).catch((function(){alert("Invalid data")})):alert("Please fill in the required fields:")}(m)},type:"button",className:"btn btn-primary"},"Save changes")))))},x=(a(20),function(e){var t=e.data,a=Object(n.useState)({}),c=Object(l.a)(a,2),o=c[0],s=c[1],m=Object(n.useState)([]),u=Object(l.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(!1),b=Object(l.a)(f,2),v=b[0],h=b[1],y=Object(n.useState)({}),O=Object(l.a)(y,2),N=(O[0],O[1]),j=Object(n.useState)(),w=Object(l.a)(j,2),k=w[0],P=w[1],S=function(){h(!v)},x=function(e){E.posts.edit(e,e.id).then((function(e){e.ok&&e.json().then((function(e){var t=d.map((function(t){return t.id!==e.id?t:e}));p(t),P(null),N({title:"",description:""})}))})).catch((function(e){return console.log(e)})),S()};return Object(n.useEffect)((function(){o.id||E.people.getById(g.get("user")).then((function(e){return s(e)})),o.id&&E.posts.get().then((function(e){return e.json()})).then((function(e){return p(e.filter((function(e){return e.personId===o.id})))}))}),[o,v,t]),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",width:"100%"}},r.a.createElement("h5",{className:"card-title"},o.username),r.a.createElement("button",{onClick:S,className:"btn btn-success"},"Add Post"),v&&r.a.createElement(C,{edit:k,upDatePost:x,onShow:S,username:o.username})),r.a.createElement("div",{className:"card-body"},r.a.createElement(i,{key:d.id,onShow:S,removePost:function(e){E.posts.remove(e),p(d.filter((function(t){return t.id!==e})))},formToUp:function(e){console.log(e),P(e),S()},template:t,upDatePost:x,isInWorkspace:!0,posts:d}))))});a(6);var T=function(){var e=Object(n.useState)(g.get("token")?"Workspace":"Home"),t=Object(l.a)(e,2),a=t[0],c=t[1];function o(e){c(e)}return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 col-12 p-0"},r.a.createElement(O,{tab:a,setNavTab:o}),r.a.createElement("div",{className:"container"},"Home"===a&&r.a.createElement(y,null),"Login"===a&&r.a.createElement(w,{setNavTab:o}),"Registration"===a&&r.a.createElement(P,{setNavTab:o}),"Workspace"===a&&r.a.createElement(x,null))))))};o.a.render(r.a.createElement(T,null),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.b28a7ace.chunk.js.map